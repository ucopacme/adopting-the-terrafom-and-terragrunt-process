Terraform seems to be like an onion you peel back layer by layer.
Just when you think you **understand** it, a curve ball is thrown and you are back to square one.



## Commands Most Widely Used:

The commands one will use daily in working with Terraform:

## **terraform init** 
Starting a new project run this command to **initialize** your new project.

```
# % terraform init

Initializing the backend...

Initializing provider plugins...

The following providers do not have any version constraints in configuration,
so the latest version was installed.

To prevent automatic upgrades to new major versions that may contain breaking
changes, it is recommended to add version = "..." constraints to the
corresponding provider blocks in configuration, with the constraint strings
suggested below.

* provider.aws: version = "~> 3.7"

Terraform has been successfully initialized!
```

## **terraform validate** 
The validation command will do as it says and validate the **configuration** is syntactically correct.
It will not attempt to validate the resources by connecting to the API.


```

# %  terraform validate
Success! The configuration is valid.

```
╰─➤
vi main.tf

% **terraform validate**

## HOUSTON WE GOT A PROBLEM!!!

could it be a syntax error?
```

Error: Unsupported block type

  on main.tf line 1:
   1: ata "aws_caller_identity" "this" {

Blocks of type "ata" are not expected here. Did you mean "data"?
```


## **terraform plan** 
This command is used to create an execution plan. Terraform performs a refresh, and then determines what actions are necessary to achieve the desired state specified in the configuration files.


╰─➤% terraform plan

```
Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.

data.aws_caller_identity.this: Refreshing state...
data.aws_iam_account_alias.this: Refreshing state...
module.sns_topic.data.template_file.this: Refreshing state...

------------------------------------------------------------------------

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create
 <= read (data resources)

Terraform will perform the following actions:

  # module.cloudwatch_event_rule.aws_cloudwatch_event_rule.this[0] will be created
  + resource "aws_cloudwatch_event_rule" "this" {
      + arn           = (known after apply)
      +

```


## **terraform apply**
 This command is used to apply the changes required to reach the desired state of the configuration, or the pre-determined set of actions generated by a terraform plan execution plan.


╰─➤% terraform apply

```
Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.

data.aws_caller_identity.this: Refreshing state...
data.aws_iam_account_alias.this: Refreshing state...
module.sns_topic.data.template_file.this: Refreshing state...

------------------------------------------------------------------------

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create
 <= read (data resources)

Terraform will perform the following actions:

  # module.cloudwatch_event_rule.aws_cloudwatch_event_rule.this[0] will be created
  + resource "aws_cloudwatch_event_rule" "this" {
```

## **terraform fmt** 
If your like me and not good at keeping code aligned and **pretty**. Terraform has built-in function to write to a canonical format and style.

**THE CODE**

* Before:
```
module "sns_topic" {
      display_name  =     data.aws_iam_account_alias.this.account_alias
  email_address  =    var.email
  enabled      = var.enabled
  stack_name    =    "tf-SnsTopic"
  source        = "./modules/sns_topic/"
}

```
## BOOM - Let Their Be Structure!!

╰─➤%  terraform fmt

**Did it work? Enquiring minds want to know??**

```
% cat main.tf
module "sns_topic" {
  display_name  = data.aws_iam_account_alias.this.account_alias
  email_address = var.email
  enabled       = var.enabled
  stack_name    = "tf-SnsTopic"
  source        = "./modules/sns_topic/"
}
```

## **terraform destroy** 
So this is the command you must trully take your time...**READ**, **READ**, oh and did I say **READ** everything on the screen before typing yes.
This command is used to destroy the Terraform-managed infrastructure

## HINT: Always be sure you are where you think you are in regards to your current working directory!!!.

**% terraform destroy**

```
data.aws_iam_account_alias.this: Refreshing state...
data.aws_caller_identity.this: Refreshing state...
module.sns_topic.data.template_file.this: Refreshing state...

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:

Terraform will perform the following actions:

Plan: 0 to add, 0 to change, 7 to destroy.

Do you really want to destroy all resources?
  Terraform will destroy all your managed infrastructure, as shown above.
  There is no undo. Only 'yes' will be accepted to confirm.

  Enter a value: no

Destroy cancelled.
```


## So you say what is next eeh?

let's do an example deployment:

go here: * [Example Deployment](terraform-example-deployment.md)
